### DevOps：打破那堵墙

随着应用交付速度的不断加快，开发和运维之间的“墙”逐渐崩塌。当这堵墙倒下时，双方开始以前所未有的方式共同合作。

但 DevOps 究竟是什么呢？来自 Microsoft 的开发者嘉宾 Scott Hanselman 和 Cindy Sridharan（网络上更为人熟知的名字是 @copyconstruct）从开发的角度讨论 DevOps，而不同的运维团队成员则解释了他们一直以来所捍卫的工作。虽然仍然存在分歧，但在 DevOps 的推动下，团队的协作比以往任何时候都更加高效。本集还探讨了为什么这对未来的 command line heroes 至关重要。

### Saron Yitbarek

想象一堵墙。这堵墙向右延伸到视线尽头，向左也一直延伸不见尽头。它比你高，你无法看到墙的另一边，但你知道那边有很多人。可是你并不知道他们是否和你一样。他们是敌人，还是朋友？

### 00:30-Gordon Haff

开发人员编写代码后，直接把它“丢”到墙的另一边给运维，然后这就成了运维的问题。

### Richard Henshall

他们只做自己想做的事，完全不关心服务的质量。

### Sandra Henry-Stocker

这两方的工作几乎是对立的——一方负责做出改变，另一方则尽可能抵制这些改变。

### Richard Henshall

但双方并没有就他们实际想要达成的目标进行有效沟通。

### 01:00-Saron Yitbarek

我是 Saron Yitbarek，欢迎收听 Command Line Heroes，这是来自 Red Hat 的原创播客。第四集，DevOps：打破那堵墙。

是的，几十年来，IT 世界的角色分工一直如此明确。一边是开发人员，他们的激励是尽可能快速地创造更多的变化。另一边是运维团队，他们则被激励去阻止过多的变化发生。与此同时，代码在两者之间被盲目地“丢”过墙，没有真正的同理心或沟通。要打破这样一堵墙需要什么呢？这需要一次巨大的转变。

### 01:30-Saron Yitbarek

开源运动动摇了这场战斗。上一集，我们看到新的敏捷方法学如何强调持续的迭代改进，而这种对速度的需求迫使我们改变彼此合作的方式。孤立的人们的工作速度是有限的，而这个限制逐渐成为了一个问题，因为……

### 02:00-Richard Henshall

这完全是为了更快的市场响应时间，增加敏捷性，进行更多的迭代工作，而不是长期进行大型项目。

### Saron Yitbarek

Richard Henshall 是一名 Ansible 产品经理。

### Richard Henshall

我记得以前下订单买服务器时，通常要等四个月才能收到。所有的组件都是合并在一起的，整个技术栈就是一个整体，设计和构建这些东西通常需要好几年。但这种情况已经不再适用了，几乎消失了，很多组织现在的做法是……先上去试试，然后再把它撤下来。

### 02:30-Saron Yitbarek

如今，像 Amazon 这样的公司每分钟会部署多次新代码。想象一下，如果使用逐步的瀑布式工作流程来完成这一切，那简直是不可能的。很快，运维团队对于稳定性、安全性和可靠性的担忧将被搁置，转而追求快速发展。

### 03:00-Saron Yitbarek

与此同时，开发人员并不认为自己有责任编写在现实世界中有效的代码。他们对稳定性和安全性的问题兴趣不大，但这些问题确实存在，我们需要去解决。因此，我们最终会在后续过程中产生很多不必要的修改，反复穿梭于两者之间。

想想这种分歧会如何拖慢公司的发展，想想这有多么低效。但开发人员很少被鼓励去关注自己命令行之外的事情。

### Sandra Henry-Stocker

他们的目录大小只会不断增长，几乎从不进行清理，除非不清理的话根本无法完成任何工作。

### 03:30-Saron Yitbarek

Sandra Henry-Stocker 是一位退休的系统管理员，她为 IDG 杂志撰稿。

### Sandra Henry-Stocker

我常常会进行这样的辩论，问道：“嘿，你看看，你占用了这么多磁盘空间。难道不能清理一些东西，以便我们有更多的工作空间吗？因为这个服务器上的空间快用完了。”而且是的，我们经常会讨论这些问题。

### Saron Yitbarek

归根结底，这这是一个思维方式的问题。开发人员和运维之间这种对立的态度使得一方无需理解另一方的顾虑。在过去，这种情况还算可以，但随着速度变得至关重要，这种文化变得越来越不稳定。将自己孤立在工作泡沫中实在是太低效了。

Jonah Horowitz 在 Stripe 的可靠性工程团队工作。他描述了即使开发人员和运维团队想要合作，他们也无法做到，因为从某种意义上说，他们被分到了对立的团队。

### 04:30-Jonah Horowitz

运维团队通常通过正常运行时间和可靠性来衡量其表现，而提高正常运行时间的一个重要方法就是减少系统中的变化。但当然，发布新功能就是在改变系统，而负责产品工作的软件工程师则被激励尽可能快地发布更多功能。因此，当你有这些分开的角色时，就会在开发和运维之间产生这种冲突。

### 05:00-Saron Yitbarek

开发人员致力于构建新功能，而运维团队则致力于确保网站正常运行。这两个目标彼此对立。但正如我所说，由于对速度和快速迭代发布的需求不断增加，开发与运维之间的脱节正达到危机点，必须有所改变。

### 05:30-Saron Yitbarek

大约在 2009 年，划分开发和运维的“墙”看起来更像是一堵监狱墙，而不是其他什么。我们需要一种新的方法论，以平滑开发到运维的过渡，让双方能够以更快速、更全面的方式协作。

Patrick Debois，视频平台 Small Town Heroes 的首席技术官，为那些想要打破这堵墙的人们举办了一场会议。他将自己的创意称为 DevOps Days。为了方便在社交媒体上使用，他把这个名字缩短为 DevOps，于是这个运动有了名称。

### 06:00-Saron Yitbarek

但一个名字并不是一个过程，虽然显而易见为什么需要 DevOps，但它究竟是如何运作的呢？我们该如何在不引发冲突的情况下将开发和运维结合在一起？幸运的是，我有 Scott Hanselman 来为我讲解这个问题。Scott 是 Microsoft 的 .NET 和 ASP.NET 的首席项目经理。

所以 Scott，我觉得我认识你已经很久了，肯定有好几年了。

### 06:30-Scott Hanselman

永远。

### Saron Yitbarek

永远。我想和你聊聊作为开发人员与 DevOps 之间的关系，以及这些年来 DevOps 的发展情况。你觉得怎么样？

### Scott Hanselman

好的，这听起来不错。

### 07:00-Saron Yitbarek

好的。我觉得一个好的开始是定义一下 DevOps 是什么。你会如何描述它？

### Scott Hanselman

2008 年的维基百科条目对 DevOps 的定义实际上非常好。它是一套旨在缩短从提交更改到这些更改投入生产之间时间的实践，同时确保质量。因此，如果你想想，“嘿，我提交了一些代码。今天是星期二，这些代码将在六月的版本中发布。”这就糟糕了。这就不是持续集成，而是每年几次的集成。

### 07:30-Scott Hanselman

如果你有一个良好健康的 DevOps 系统，并且进行了相关的设置实践，那么你将能够持续地将代码集成到生产环境中。那么，你能做些什么呢？你可以定义和创建哪些最佳实践来实现这一点？比如，我在星期二提交了一些代码，星期四它就上线了。现在，重要的部分来了——稍作停顿以强调——同时确保高质量。

### 08:00-Saron Yitbarek

这个定义真正有趣的地方在于它是一套实践，但我觉得当我听到人们谈论 DevOps 时，它似乎变得更具体了一些。他们谈论它时，就好像它是一个角色、一份工作、一个职位或一个头衔。这是否与它作为一套实践的概念相冲突？

### Scott Hanselman

我认为，当一套新的实践或一个新的流行词出现时，人们喜欢把它印在名片上。对那些正在收听这个播客的人我并没有任何不尊重，假如你们现在感到被冒犯，看看自己的名片想，“这太糟糕了。”然后可能会把笔记本电脑合上，愤怒地退出这个播客。

### 08:30-Scott Hanselman

Brian Guthrie 发表过一个非常好的讨论，他是一位思想工作者，曾在 SoundCloud 工作。他真是个聪明的人。他谈到了 DevOps，并在几天前的推特上说，DevOps 是一套实践，完毕。它不是一个职位名称，也不是一款软件工具，不是你安装的东西，也不是一个团队名称。

### 09:00-Scott Hanselman

他这样表述，“这不是魔法企业的仙尘。” 如果你没有最佳实践，如果你没有好的实践，那就没有 DevOps。所以，这更多是一种思维方式，而不是说，“我们要招聘 DevOps 工程师，然后将这些神奇的 DevOps 工程师引入组织中，而组织却没有推动变革的意愿，也没有接受 DevOps 的思维方式。” 所以，如果你认为它是一个工具包或可以安装的东西，那你就错过了要点。

### 09:30-Saron Yitbarek

好的，让我们回到过去，在 DevOps 这个术语出现之前，在我们把 DevOps 写在名片上或谈论它作为一套实践之前。十年前，你会如何描述开发人员和运维人员之间的关系？

### Scott Hanselman

那时的关系相当对抗。运维人员控制着生产环境，而开发人员则根本接触不到生产。我们处于一堵不透明的墙的两侧。在开发这边，我们尽可能地尝试制作一个看起来像生产环境的东西，但实际上……它永远不会真正像生产环境。

### 10:00-Scott Hanselman

我们遇到了一些问题。我们的开发环境与生产环境在外观、感觉和使用上都不一样，因此不可避免地会出现“嘿，生产环境中的表现与开发环境不同”的情况。而且，从代码提交到它投入生产之间的时间往往是几周，这使得你的思维根本不在正确的状态中。因为我在一月份开发了那个功能，而它现在才在四月份推出，所以当问题不可避免地出现时，修复要到六月份，而我甚至都不记得我们在讨论什么。

在运维团队中，他们的工作几乎就像是故意拖慢我们的进度。他们的存在就是为了让开发人员的工作变得更慢，当然，他们也觉得我们总是想要破坏生产环境。

### 11:00-Saron Yitbarek

那么为什么会这样？这只是对开发人员想要什么以及他们试图做什么的根本误解吗？还是说这是信任问题？为什么关系会如此对抗？

### Scott Hanselman

我觉得你已经回答得很好，完全正确。确实存在信任问题。我认为，开发人员觉得自己很特别，或在某种程度上比 IT 人员更优秀，而 IT 人员则觉得开发人员对生产环境没有尊重。

### 11:30-Scott Hanselman

我认为这种文化有点是来自于高层，认为我们是不同的组织，目标也有所不同。我认为软件开发中发生了一些成熟的变化，我们都意识到我们编写软件是为了推动业务的发展，不管那个业务是什么。

所以这种“我们都朝着正确的方向努力”的感觉，就像他们说的，“所有的木材都在同一支箭后面。”但这绝对是信任的问题，因为 DevOps 工程师不信任产品工程师进行部署，对吧？

### 12:00-Scott Hanselman

而且 DevOps 工程师通常不编写代码，所以他们不了解发生了什么变化。因此，在各个层面上都缺乏信任。没有人理解部署过程，每个人只信任自己，他们也……比如，“我只信任自己去进入生产环境。我不信任 Saron 去进入生产环境，她根本不知道自己在说什么。我来做。”

### 12:30-Scott Hanselman

所以如果没有人真正理解系统，那么全栈工程师的概念几乎是一种神话。但现在，我们开始将整个技术栈视为一个组织。我们有“全产品拥有权”这样的术语，敏捷方法论也提到每个人都应该拥有产品，这种对代码的社区拥有感和围绕代码的社区逐渐改变，创造出一种信任的环境。

### 13:00-Saron Yitbarek

我是 Saron Yitbarek，你正在收听 Command Line Heroes，这是来自 Red Hat 的原创播客。因此，要使 DevOps 实现其潜力，我们需要双方之间建立更多的信任，这意味着需要更多的沟通。回到 Richard Henshall。他认为对双方的同理心是 DevOps 的基石。

### 13:30-Richard Henshall

一些 DevOps 从业者，特别是那些优秀的从业者，实际上都做过这两个角色。我认为真正的力量来自于人们能够真正体验这两个角色，而不仅仅是看到另一方。因此，你不会保持这种隔离，而是……你会在他们的角色中生活一段时间。我认为这就是重新建立同理心的关键。

### Saron Yitbarek

现在，这不仅仅是为了让人感到温暖的沟通。Richard Henshall 描述的是整个行业朝着 Scott 提到的重点转变。

### 14:00-Saron Yitbarek

关注点转向持续集成。软件不仅要以小而快速的批次编写和发布，还要以小而快速的批次进行测试。这意味着，开发人员需要对他们编写的代码以及它在现实世界中的表现获得即时反馈。

随着上市时间从几个月缩短到几天，甚至几小时，我们开始寻找一套可以自动化任何可以自动化的元素的新工具。

### 14:30-Gordon Haff

要最有效地进行 DevOps，你确实需要一个全新的工具生态系统。

### Saron Yitbarek

Gordon Haff 是 Red Hat 的高级经理。

### Gordon Haff

我们看到的是一大堆新类型的工具和平台，DevOps 可以利用它们。它们实际上都是来自开源社区。

### Saron Yitbarek

Gordon 是对的。这些新工具的集合非常庞大，他对开源的看法也是正确的。在严格的专有系统中，自动化工具的增长是不可能实现的。

### 15:00-Gordon Haff

市场上有很多监控工具，Prometheus 是一个常见的选择。STO（服务编排）开始引起很多人的兴趣，所以这也是一个选择。

### Saron Yitbarek

GitHub 让你可以跟踪更改。PagerDuty 管理数字运营。NFS 在网络中挂载文件系统。Jenkins 让你可以在构建上自动化测试。

### 15:30-Saron Yitbarek

这么多工具，如此多的自动化。最终结果是，开发人员可以将他们的更改实时推送，构建会自动创建，编译会被管理，并且会对其运行自动化测试。Sandra Henry-Stocker 描述了这种变化带来的影响。

### Sandra Henry-Stocker

因此，我可以快速部署我正在工作的东西，而且我可以仅通过一台计算机的命令行控制多个系统，而不必在很多不同的地方工作，也不必担心如何将我正在工作的东西发送到网络上并部署到很多不同的机器上。

### 16:00-Sandra Henry-Stocker

基本上，坐在一个地方就能轻松地对广泛的计算机系统进行更改。

### Saron Yitbarek

自动化工具解决了速度问题。但我不想让我们只赞美工具，而忽视实际的方法论和文化转变。Scott Hanselman 和我讨论过这条微妙的界限。

### 16:30-Saron Yitbarek

你一开始就提到 DevOps 是一套实践，是一种心态，是一种思维方式。这听起来就像我们创造的工具是我们应有思维和操作方式的体现，代码版本的表现。

### Scott Hanselman

我喜欢这个说法，你真是个天才。没错。我们以前让产品负责人在这些 Word 文档中写代码应该如何工作。他们写规格，对吧？最后一次 Word 文档导致构建失败是什么时候？

### 17:00-Saron Yitbarek

没错。

### Scott Hanselman

对吧？

### Saron Yitbarek

好的，部分原因是我只是想让你听到 Scott 称我为天才。但我确实认为这些工具几乎是我们文化转变的象征。它们鼓励我们拓宽角色。我们开发人员被迫至少偶尔从命令行中看问题。这样，开发和运维的优先级在一定程度上就会对齐。事实上，DevOps 的兴起明确表明，在一个速度不断增加的世界里，没有人能负担得起孤立的状态。

### 17:30-Saron Yitbarek

Jonah Horowitz 曾在多家湾区公司工作，包括 Quantcast 和 Netflix。他解释了即使是一些世界上最大的公司也如何在这种背景下重新构想他们的文化。

### Jonah Horowitz

我们得到了整个公司的文化认同，大家都认为，“这就是我们将要部署软件的方式。我们会以小批量的方式进行部署，使用这些部署程序。” 我认为 DevOps 如果仅仅由运维团队推动，是不可能成功的。

### 18:00-Jonah Horowitz

这必须是公司管理层和领导层所认同的事情。这确实是一次文化转变。

### Saron Yitbarek

当 MacKenzie 对 800 名首席信息官和 IT 高管进行调查时，80%的人表示他们在组织的某个部分实施 DevOps，而且超过一半的人计划在 2020 年之前在整个公司实施。高管们意识到，自动化工具提升了交付速度。

### 18:30-Saron Yitbarek

这些人曾经对在数据中心收到一托盘设备后，它静置一个月才上线表示满意。如今，如果你等待超过 10 分钟才能完成某个服务的配置，那就说明你做错了什么。随着竞争对手达到这样的速度，没人能负担得起被落在后面。

### 19:00-Saron Yitbarek

我可以想象，运维团队在把所有这些工具交给开发人员时一定感到很紧张。运维团队习惯于扮演成熟稳重的角色，而现在他们却要把车钥匙交给开发者？真是吓人。我认为我们开发人员正在学习如何快速移动而不破坏事物。但随着 DevOps 革命的尘埃落定，最大的变化可能会发生在运维团队身上。

### 19:30-Saron Yitbarek

DevOps 是否真的威胁到了运维的角色？开发人员是否在利用他们那些闪亮的新工具来吞噬运维？Cindy Sridharan 是一位开发人员，她对此写了一篇长篇调查文章。在你的文章和博客中，你提到运维人员对当前的发展状况并不一定感到满意。发生了什么？你会怎么说？

### Cindy Sridharan

这样说吧，DevOps 的理想是责任将会被共享。开发和运维之间会有一个更为均衡的 50-50 分担，以确保软件的全面交付。

### 20:00-Cindy Sridharan

我认为，运维工程师的不满很多来自于这样的事实：这并不是真正的现实，运维工程师仍然是那些总是抽到短签的人。他们仍然是在做繁重工作的那一方，仍然是主要承担实际运行应用程序责任的人，而开发人员并不一定做得足够。

### Saron Yitbarek

这个问题在未来几年将变得至关重要。DevOps 将在多大程度上体现运维的特征？随着我们实现自动化，运维的角色会被削弱，还是会转变？

### 20:30-Saron Yitbarek

但我们必须记住，DevOps 不仅仅是关于工具和新技术的应用。这种方法论实际上正在塑造技术，而技术又反过来塑造方法论。这里形成了一个令人惊叹的反馈循环。文化造就工具，而工具又强化文化。

### 22:00-Saron Yitbarek

最终，我们在本集开头描述的那道墙，分隔开发和运维的那道墙，我不知道在五年后，这种“把代码扔过墙”的比喻是否还会对开发人员有意义，而这正是一个很棒的事情。如今，当我和人们交谈时，我听到的是一个新故事。

云架构师理查德·亨肖。

### Richard Henshall

我认为这开始让人们意识到另一方更关注的是什么。我看到更多的理解。

### 23:00-Saron Yitbarek

系统管理员 Jonah Horowitz。

### 23:00-Jonah Horowitz

我认为编写优秀软件是一门技艺，而我在与最优秀的开发者合作时看到的一点是，他们确实在推动软件工程或软件开发的技艺向前发展。

### Saron Yitbarek

系统管理员 Sandra Henry-Stocker。

### Sandra Henry-Stocker

我认为开发者变得更加敏锐和小心。他们必须不断提高自己的技能，我知道这需要很多努力。

### 23:30-Saron Yitbarek

这是一个爱的聚会。事实证明，那面墙的另一边有一些朋友。很高兴见到你。那么， confession，我以前总是认为 DevOps 很无聊，只是一堆死板的自动化脚本和扩展问题。我的抵触情绪部分是出于实用考虑。作为开发者，每周都有一些新工具发布，一些新框架。DevOps 一直是这些令人恐惧的快速变化的一部分。但现在，尤其是在听到这些故事之后，我明白了。

### 24:00-Saron Yitbarek

DevOps 不仅仅是工具，它是我们如何一起合作更快地构建更好的产品。

好消息是，随着我们为像你我这样的开发者开发新平台，我的工作变得更好、更快，并且更能适应不同的环境。关注的范围也可以不断扩大。你会看到人们将 DevOps 扩展到包括安全性，因此我们有了 Sec DevOps，或者他们将商业纳入其中，因此我们有了 Biz DevOps。我们现在要讨论的辩题是，开发者理解这些工具的使用以及 DevOps 的运作原理有多重要，以及期望开发者理解这个新世界的现实性有多高？

### 24:30-Saron Yitbarek

我们解决这个辩题的方式将定义未来命令行英雄的工作。

你可能注意到，在关于工具和自动化的讨论中，我遗漏了一些重要的内容。好吧，我把这些留到下次，当 DevOps 自动化进入光速并且我们追踪容器的兴起时再说。

### 25:00-Saron Yitbarek

这一切都在第五集。

《命令行英雄》是 Red Hat 出品的一档原创播客。有关本集及往期节目的更多信息，请访问 redhat.com/commandlineheroes。到达那里后，你还可以注册我们的新闻通讯，并且要自动免费获取新剧集，请务必订阅该节目。

### 25:30-Saron Yitbarek

只需在 Apple Podcasts、Spotify、Google Play、CastBox 或你获取播客的任何平台上搜索《命令行英雄》。然后点击订阅，这样你就会第一时间知道新剧集上线。我是 Saron Yitbarek。感谢你的收听，继续编码吧。
