# 容器竞赛

容器的兴起为开发者开启了一个新领域，简化了工作从一台机器转移到另一台机器的过程。然而，随着它们的普及，一场新的竞争随之而来。控制容器编排的竞赛已经开始，参与者是行业中最快、最强的玩家。

容器是开源运动中最重要的进化之一。在这一集中，特邀嘉宾 Kelsey Hightower、Laura Frank 和 Clayton Coleman 解释了这一新技术为何是未来的基础构件，以及为什么编排如此关键。

## Saron Yitbarek

那么，你是否曾经去看过马赛，看到雄壮的种马们排成一排，蹄子在泥土上拍打？你需要想象的就是这个场景。一场比赛即将开始，结果将使其中一位竞争者成为冠军。

## 00:30-Saron Yitbarek

不过，它们不是马，而是科技世界的强者。这场比赛有什么重要性呢？有什么奖品如此珍贵，以至于它们都在排队并急于参与？这是一场全力以赴的竞赛，争夺容器技术编排的控制权。而且，这场比赛与其他比赛不同。赢得这场比赛，你不仅是今天的冠军，更是为自己赢得未来冠军的地位。

## 01:00-Saron Yitbarek

我是 Saron Yitbarek，欢迎收听《命令行英雄》，这是 Red Hat 出品的一档原创播客。第五集：容器大赛。上一次，我们探讨了 DevOps 的崛起，以及一套新工具如何与开发者角色的新态度相联系。在这一集中，我们将追踪容器的兴起，以及它们如何通过支持新类型的无限工作进一步扩展开发者的角色。同时，我们将看到容器的标准化如何为争夺容器编排的竞赛奠定基础。

## 01:30-Saron Yitbarek

这是一场严肃且全球范围的竞赛，吸引了一些行业中最快、最强的参与者。他们都准备冲向终点线。准备好了吗？出发！

现在，当这些“马”离开起跑线时，也许我们应该澄清一下这场比赛为什么真的重要。谁会在乎容器呢？我个人是很在乎，但我一开始并不知道。下面是我如何意识到容器技术之美的简要故事。

## 02:00-Saron Yitbarek

不久前，我在为我的网站编写代码，并请我的朋友 Nadia 一起开发一些功能。我一直在努力保持代码的简洁、可读，当然也经过了充分的测试。对新开发者的入门应该很简单，对吧？错了，事实并非如此。这个过程相当艰难，尤其是在我们运行规格测试的时候。

## 02:30-Saron Yitbarek

代码是能运行的，但我们无法在各自的机器上让所有测试通过。我们遇到了奇怪的时区问题。她的 Ruby on Rails 版本和我的不同。这就是经典的情况：“在我的机器上能工作。”“但是在我的机器上不行。”我会进行修改，直到在我这边能够运行，但当我把代码发给 Nadia 时，一切又都崩溃了。

## 03:00-Saron Yitbarek

我知道，Nadia 和我所经历的挣扎是所有开发者都会经历的事情，甚至还会开玩笑。我只是认为这是一部分工作，是你必须忍受的东西。我没有意识到，最终有了解决方案。想象一下，有一种方法可以降低人们之间的壁垒，一种新方法，让我们可以使用自己喜欢的工具集，并且仍然能够轻松地传递工作。想象一下，有一种方法可以在工作从开发到测试再到生产的过程中保持一致，无论有多少人在参与，或者这些人在哪里。想象一下，如果我在浪费几周时间用老方法之前，早一点考虑容器技术该多好。

## 03:30-Liz Rice

容器实际上就是一个进程。

## Saron Yitbarek

Liz Rice 是 Aqua Security 的技术布道者。她正在描述让容器如此有用的东西，即它们将所有内容包装成一个整洁、可运输的包。

## 04:00-Liz Rice

这就像任何其他进程，只是它对世界的视野非常有限。例如，你启动一个容器。该进程会获得自己的根目录，它认为自己在查看整个计算机的根目录，但实际上它只是在查看文件系统的一个小子集。

## 04:30-Saron Yitbarek

通过将可执行文件及其所有依赖项打包在一起，容器可以在任何笔记本电脑或云中的任何虚拟机上运行。它带有自己的可执行文件、库和依赖项。一切都被封装在一个容器中。所以，这就是神奇的地方，容器在每个环境中都将完全相同地运行。这意味着开发者可以共享应用程序，而不必担心老掉牙的“在我的机器上能运行”问题。

## 05:00-Saron Yitbarek

这里有一个可能有帮助的类比。你知道 Blue Apron 吗？那种可以送到你家所需食材的服务？所有的食材都被很好地分开和分配，还有食谱卡片，样样俱全？那么，想象一下，如果 Blue Apron 不仅送你切好的食材，还给你送一个厨房炉子和所有餐具，一切你需要的都装在一个小盒子里，放在你的门口。这就是容器。在我的案例中，容器技术会让我给朋友 Nadia 入职变得轻而易举，就像 Blue Apron 的晚餐一样简单。虚拟机也提供了一种预打包的解决方案，但这就是我们要抛弃 Blue Apron 类比并进入具体细节的地方。

## 05:30-Liz Rice

很多人认为容器是一种轻量级虚拟化，或者说是轻量级虚拟机，但实际上并不是。它与虚拟机有很大的不同。虚拟机拥有独立的完整操作系统，而容器则是共享操作系统的，换句话说，一台机器上的所有容器都共享相同的操作系统。

## 06:00-Saron Yitbarek

最终，容器和虚拟机将并行工作。容器并不会取代虚拟机。虚拟化仍然会提高数据系统的效率，并且对于服务器整合至关重要。但容器的崛起为我们打开了一扇以前关闭的门。可以这样想，如果我们完全依赖虚拟机，运行所有那些模拟服务器，我们就会产生巨大的开销。

## 06:30-Saron Yitbarek

虚拟机的大小可能是几个 gigabytes，而容器可能只有 20 megabytes。虚拟机启动可能需要几分钟。如果我试图部署基于 Web 的应用程序，这个速度就不太理想。作为完整机器虚拟化的轻量级、更快速的替代方案，早已被人们所期待。

## 07:00-Saron Yitbarek

那么，稍微讲一下历史。早在 1979 年，就有一种原型容器的趋势。当时在 Unix V7 上工作的开发者设计了根系统调用，这允许创建只包含特定程序的环境。这个突破为我们今天的容器指明了方向。另一个重要的进步发生在 2008 年，当时出现了 Linux 容器。那时，我们实现了操作系统级的虚拟化。

## 07:30-Saron Yitbarek

我们终于可以使用单个 Linux 内核运行多个容器，从而绕过了对完整虚拟机的需求。这意味着基础设施成本开始降低。然而，并不是所有人都立即看到了容器的潜力。

## Laura Frank

容器化确实是一个开创性的想法。这是一个全新的概念。

## Saron Yitbarek

Laura Frank 是 CloudBees 的工程总监。

## 08:00-Laura Frank

只有一小部分人理解容器的细节并能够操作这项技术。随着时间的推移，更多的人开始接触这个概念，开始参与其中，知识在工程团队、工程组织和社区中传播，这项技术变得越来越普及。

## Saron Yitbarek

由于之前提到的与虚拟机的相似性，Laura 认为容器的潜力在一定程度上被忽视了。

## 08:30-Laura Frank

我认为，对于我当时的职业阶段以及一般的技术人员来说，如果你不是系统管理员或深入研究过 Linux 的人，容器化仍然是一个相对新颖的概念，我对它只是略有了解。因此，我渐渐意识到它就像是“哦，这有点像我用虚拟机时的模式，我可以创建一个完全隔离的临时环境，然后在使用完后很好地清理自己。”

## Saron Yitbarek

然而，容器不仅仅是保持整洁。它们将彻底改变整个行业。随着开源项目和社区的兴起，容器的标准化很快变得可能。

## 09:00-Scott McCarty

接口变得非常简单。

## Saron Yitbarek

Scott McCarty 在 Red Hat 担任容器高级策略师。他是一位资深人士，甚至还记得在容器和虚拟机之前的工作经历。

## 09:30-Scott McCarty

我曾在一个在线零售商工作，在 Dot-com 1.0 时代，我们有成千上万台物理机器，并在这些不同的服务器上反复部署相同的软件堆栈，我们尝试过各种不同的方法。无论是从原始操作系统到虚拟机，再到 Linux 容器和 Solaris 容器，实际上都是同样的问题：你仍然需要在所有这些不同的虚拟机中管理配置，或者说是那些看起来像操作系统实例的构造。

## Saron Yitbarek

一旦容器标准化，这一切就开始发生变化。

## 10:00-Scott McCarty

现在有很多非常标准的方法来处理这种打包的应用程序，我认为这从根本上改变了一切。它使得使用变得非常简单，而且容器比虚拟机更小、更快，这也大大加分。

## 10:30-Saron Yitbarek

在 Linux 容器取得的进展基础上，这些新的开源项目和社区引导了开发者。我们对后端的一些焦虑被一扫而空。突然间，容器及其促进的微服务变得非常有吸引力。一旦出现了通用的容器语言，障碍就被打破，容器技术改变了我们的工作方式，也加快了我们学习新技术的速度。

## 11:00-Saron Yitbarek

还记得我和同事 Nadia 的那一番折腾吗？那种“在我的机器上能工作”的情况？在容器的世界里，这个问题不存在。开发者社区看到了容器变得多么快速、便宜和容易，远比我们之前使用的标准操作系统简单得多。采用的速度令人惊叹。但请记住，容器标准的出现只是为真正的竞赛——编排做的热身。

马匹排成一列，发令枪响，终于冲刺冠军。不仅仅是为了容器本身，而是为了那些可以部署和管理它们的工具。

## 11:30-Saron Yitbarek

我是 Saron Yitbarek，欢迎收听《命令行英雄》。在争夺成为标准容器编排引擎的竞赛中，谁将提供管理所有容器的平台呢？最开始，有两个竞争者领先。

## 12:00-Saron Yitbarek

由 Apache 驱动的 Mesos 和由 Docker 驱动的 Swarm 领先。但接着，怎么回事？一个新来的竞争者猛冲而来。是 Google。Linux 创建了云原生计算基金会（CNCF），而 CNCF 正在推广 Google 的新开源编排引擎 Kubernetes。

## 12:30-Saron Yitbarek

现在，Mesos 和 Swarm 在 Kubernetes 之前已经领先，对吧？它们得到了 Apache 和 Docker 的支持，已经在这场竞赛中参与了一段时间。但 Kubernetes 拥有其他竞争者所缺失的东西。Clayton Coleman 可以告诉我们那个秘密成分是什么。Clayton 是 Red Hat 的 Kubernetes 和 OpenShift 架构师。

## 13:00-Clayton Coleman

从一开始，Kubernetes 就在这一点上表现出色，Google 非常善于开放项目，让贡献和参与变得容易。项目的核心关注点是创造一个能让大多数开发者和运维人员生活更轻松的工具。我认为 Kubernetes 及其周边社区能够找到一个适合大多数人的平衡点，同时又足够扩展，以解决一些更极端的用例。

## Saron Yitbarek

在早期，Kubernetes 涉及了来自 Red Hat、CoreOS 和 Google 的工程师。随着 Kubernetes 达到 1.0，初创公司和大公司的人们开始采纳它，并在此基础上进行构建。关键是，这一增长从来不是由 Google 或其他任何人主导的。

## 13:30-Clayton Coleman

所以，我喜欢在这种情况下用 Linux 来类比。Linux 并不是由 Linus 编写内核后告诉所有用户空间的人如何编写 GCC 或如何构建 NGINX 或 Apache。相反，内核团队专注于构建一个非常有效的核心操作系统，并与像 GNU 项目这样的其他开源社区合作，将其他 Unix 上有效的工具引入 Linux。

## 14:00-Clayton Coleman

因此，今天我们运行的许多工具，核心 Linux 团队中的任何人都没有参与过。

但 Linux 整体上远不止于内核，我认为这种模式正是 Kubernetes 有机会利用的。因此，在构建社区并专注于 Kubernetes 的范围时，我们尝试从核心 Kubernetes 的角度来思考，这就是分布式集群操作系统的内核。

## 14:30-Saron Yitbarek

Kubernetes 在开源世界中证明了自己非常擅长建立社区。就像我们在第二集看到的 Linux 的崛起一样，如今竞赛的赢家往往是那些知道如何团结社区的人。事实上，虽然 Google 开始了 Kubernetes，但现在它真正属于每一个开发者，并由云原生计算基金会管理。

## 15:00-Saron Yitbarek

在 GitHub 上，Kubernetes 大约有 30,000 个星标，而 Swarm 和 Mesos 各自只有几千个。这一点非常说明问题。这是由我们的社区为我们的社区创造的技术。

我想了解他们的态度。一个大型营利公司是如何与他人相处得如此融洽的？我找到了一个非常合适的人来回答这个问题。Kelsey Hightower 是一名在 Google 工作的技术专家，负责支持与容器相关的一切。

## 15:30-Saron Yitbarek

当你考虑到 Google 的位置时，他们在分布式系统方面有很多经验，能够在全球范围内管理众多服务器，因此他们似乎非常适合开发 Kubernetes，并能很好地赢得这场竞争。所以，当你思考 Kubernetes 与开源之间的关系时，你怎么看待这种关系？

## 16:00-Kelsey Hightower

我认为在基础设施工具甚至编程语言方面，实际上没有选择。即使是非常出色的专有工具，很多人也不会考虑它，除非它是开源的。我认为原因在于，大多数人会采纳像 Kubernetes 这样的技术基础设施工具，而你可能会给自己设定一个检查点，决定“我们将坚持使用这个版本四到五年，或者我们需要根据自己独特的需求对其进行修改。”

## 16:30-Kelsey Hightower

一旦你到了那个阶段，就很难说服企业走上“嘿，每台服务器要 200 美元，且你无法查看源代码，请等着我们来修改”的道路。

这条路已经不存在了。所以我不知道是否还有可能在没有开源的情况下进行基础设施建设。开源的第二部分是可以与之相关联的社区，我认为 Kubernetes 从一开始就做得非常出色。

## Saron Yitbarek

所以我想回到竞争中。因为正如你自己提到的，不仅仅是 Kubernetes，还有 Docker 的 Swarm，以及 Apache 的 Mesos……

## 17:00-Kelsey Hightower

所以，我认为当人们谈论这场战斗时，我不知道这场战斗是否真的在于 Mesos 和 Docker 之间，我觉得战斗实际上是在于那些一无所有的人。对吧？你还在用自制的 Bash 脚本挣扎，试图到达你需要去的地方，而没有使用编排工具的市场远比已经选择了 Mesos 或 Swarm 的人要大得多。

## 17:30-Kelsey Hightower

所以这就是这场战斗的本质，也是未来的方向。现在真正的问题是如何帮助最终用户。对于那些希望找到更好解决方案的人来说，Mesos、Kubernetes 还是 Docker Swarm 会成为首选吗？这都是值得讨论的。但我可以告诉你，像我这样的工程师，如果你放下营销和一些供应商，真正参与这个项目的人，我常用这个短语：“不同的公司，相同的团队。”

## 18:00-Kelsey Hightower

我们为彼此构建的许多工具，最终都会以某种方式出现在其他产品中。对吧？好的想法就是好的想法。因此，没有理由说：“哦，那是 Mesos 人员在做的，我们就忽视它。”这有点愚蠢。从工程和社区的角度来看，我们会相互交叉传播这些想法。你几乎需要这种竞争，以便我们可以独立思考，最好的想法浮出水面，然后我们挑选出那些以正确方式服务用户的想法。

## 18:30-Kelsey Hightower

所以在这场竞争中仍然很早，再次强调，这完全是免费的。你明白我的意思吗？我们并不是直接向任何人销售，因此这实际上更多是一个平台的玩法，开放给每个人，用户会选择满足他们需求的工具。我认为 Kubernetes 在社区、开放性以及解决问题方面做得非常出色。

## Saron Yitbarek

这个观点真是太美妙了。我很喜欢无论团队存在于何处，都能共同合作的想法。关于容器、编排甚至 Kubernetes 的未来，你怎么看？

## 19:00-Kelsey Hightower

是的，我在 KubeCon 上做了一个主题演讲，讨论这些工具都是很棒的。它们就像乐高积木，你可以选择 Kubernetes，选择另一个产品用于安全，再选择一个用于网络，但归根结底，作为开发者，你真正想要的就是确保你的代码能够顺利交付给客户。我认为 Kubernetes 和容器将成为基础层或平台组件，为更高级的东西，比如无服务器架构，提供支持。

## 19:30-Kelsey Hightower

没错！这就是我的代码片段。在后台，所有的平台会将你的代码片段包装成一个容器并为你运行，但他们不需要将这一切都暴露给你。因此，我认为随着 Kubernetes 的普及，它将平衡大型和小型提供商或希望自行开发的人的竞争力，能够提供这些原本只有云服务提供商才能做到的服务，因为这需要专业知识或软件投资。

这个技术可能会无处不在，但它也会被隐藏起来。因此，随着它的扩展，它将逐渐消失在表面之下。

## 20:00-Saron Yitbarek

Kelsey Hightower 是谷歌的开发者倡导者。在 2017 年秋季，Docker 宣布他们将支持 Kubernetes。他们并没有放弃 Swarm，但决定与编排竞赛的明显赢家达成共识。

## 20:30-Saron Yitbarek

他们并不孤单，Azure 和 AWS 也都宣布了对 Kubernetes 的原生支持。同时，Kubernetes 的发行版，如 OpenShift，仍在不断发展。我们得到的是一个核心的 Kubernetes，它可以扩展并支持新的用例，比如微服务或持续集成项目。——Clayton Coleman。

## 21:00-Clayton Coleman

这个生态系统在类似于 Linux 的模型下运行效果最好，我认为我们正朝着这个目标前进。因此，像所有优秀的开源项目一样，当每个人都能共同参与，构建出比我们各自单独能做得更好的东西时，这个项目就会成功。

## 21:30-Saron Yitbarek

一切都在迅速发生。这毕竟是一场比赛，而这正是我们对开源的期望。在我们甚至还未掌握容器是什么的情况下，第一圈就快要结束了。——Scott McCarty，来自 Red Hat。

## Scott McCarty

所以如果你回想两年前，容器镜像格式是一个巨大的战场；再往前推六个月到一年前，编排也是一个巨大的战场。而如果你看看 KubeCon 2017 及其前几周，几乎所有主要供应商都已宣布对 Kubernetes 的支持。所以，现在很明显，Kubernetes 在这一点上已经胜出。

## 22:00-Saron Yitbarek

容器故事中的一个章节正快速结束，几乎和它的开始一样迅速。

## Scott McCarty

因此，Kubernetes 已成为标准，而其美妙之处在于，现在应用程序定义已实现标准化。任何人都可以在这些 YAML 文件中使用 Kubernetes 对象来定义应用程序。这正是我们想要的，我在处理大规模系统时，真的期待了 20 年。

## 22:30-Saron Yitbarek

Kubernetes 的成功似乎相当明确，但即使在这场大赛结束后，我们仍然面临一些更大的问题。容器会在未来几年成为默认选择吗？它们会促进更多的云原生开发吗？这些变化将激发出哪些工具和服务？以下是我们所知道的。

## 23:00-Saron Yitbarek

通过云原生计算基金会（CNCF），社区将继续改进 Kubernetes，并根据基金会的使命，我们还将构建一整套新的容器技术。

容器已经产生了巨大的基础设施新水平，并要求全新的服务种类。仅举一个例子，Netflix 每周就会启动超过一百万个容器。这不夸张地说，容器正是未来的基石。

## 23:30-Saron Yitbarek

整个赛季，我们一直在追踪开源运动的演变。我们见证了 Linux 如何首先崛起并占据主导地位，以及开源态度如何改变商业、工作流程和我们日常使用的工具。但容器确实是这一开源运动中最重要的演变之一。它们移动性强、轻量级、易于扩展。

## 24:00-Saron Yitbarek

容器体现了开源的最佳特质，难怪开源项目推动了容器技术的发展。这是一个全新的世界。我们再也不必担心在不同机器之间或在不同云之间的迁移问题了。

## 24:30-Saron Yitbarek

容器的标准化速度超出了任何人的预期。在下一集，我们将转向一个仍然悬而未决的战斗。云计算战争正在引发微软、阿里巴巴、谷歌和亚马逊等行业巨头之间的激烈对抗。这四大云服务供应商之间的摩擦正在形成一场严峻的风暴。我们将与一些我们最喜欢的 Command Line Heroes 一起追寻那道闪电，敬请期待第六集。

## 25:00-Saron Yitbarek

Command Line Heroes 是来自 Red Hat 的原创播客。如需获取更多信息和过往集数，请访问 RedHat.com/CommandLineHeroes。在那里，您还可以注册我们的新闻通讯，并确保订阅节目，以便自动免费获取新剧集。只需在 Apple Podcast、Spotify、Google Play、CastBox 或您获取播客的任何方式中搜索 Command Line Heroes，然后点击订阅，这样您就能第一时间知道新剧集的发布。

我是 Saron Yitbarek，感谢您的收听，继续编码！
