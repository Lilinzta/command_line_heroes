# C语言的变革

C 和 UNIX 是现代计算的根基。本季我们讨论的许多语言都与 C 有关，或至少受到 C 的影响。然而，UNIX 和 C 的出现，源于贝尔实验室的一些开发者以“灰色项目”的形式共同创造了这两者。

贝尔实验室是20世纪中期的创新中心。Jon Gertner 将其描述为一个“创意工厂”。他们在1960年代的最大项目之一是帮助构建一个名为 Multics 的分时操作系统。Dr. Joy Lisi Rankin 解释了当时关于分时的热潮——它被描述为有潜力使计算变得像公共事业一样可接入。大型团队投入了多年的努力来构建 Multics，但最终的结果并没有达到他们的期望。贝尔实验室在1969年正式放弃了分时系统。然而，正如 Andrew Tanenbaum 回忆的那样，一个小型英雄团队依然坚持下去。C 和 UNIX 就这样诞生了。他们并不知道，他们的工作将如何塑造技术的未来。

### 00:00-Speaker 1

我们正处于一波新研究的开端。我们的创造力正在被激发。

### 00:10-Speaker 2

噪音。噪音。

### 00:13-Speaker 1

这些人是贝尔电话实验室的设计工程师。

### 00:16-Saron Yitbarek

在1960年代，位于新泽西州穆雷山的贝尔实验室是创新的中心，我们的科技未来在这里迈出了第一步。他们在这里开发了激光，开发了晶体管。这里是信息理论的摇篮，而在1968年，所有这些创新达到了一个新高峰，四位程序员的团队创造了一个如此开创性的东西，以至于从根本上改变了世界的运作方式。

### 00:53-Saron Yitbarek

我是 Saron Yitbarek，欢迎收听《命令行英雄》，这是红帽出品的原创播客。在整个季度中，我们追踪了一些编程语言的重大故事，现在终于迎来了我们的季度 finale。我认为我们将最大的重要故事留到最后。这个故事是关于一种使几乎所有其他语言都成为可能的语言。正好在50年前，C 语言在贝尔实验室设计出来，作为一种通用语言，其重要性如此根本，以至于我们有时会忘记它实际上是一个多么重大的成就。

### 01:35-Saron Yitbarek

为了获得完整的图景，我们必须回到1960年代，也就是 C 语言诞生之前的时光。那是一个一切似乎皆有可能的时代。

### 01:46-Jon Gertner

在1960年代，贝尔实验室几乎就像一个香格里拉。那是一个研发实验室，今天没有任何类似的存在。

### 01:56-Saron Yitbarek

这是 Jon Gertner，《创意工厂：贝尔实验室与美国创新的伟大时代》的作者。我们请 Jon 尝试解释一下当时的氛围。是什么让这个地方和这个时代使贝尔实验室在他看来成为一个创意工厂？

### 02:15-Jon Gertner

我认为今天我们有一种看法，认为竞争创造了伟大的创新，但我并不确定这是否正确，贝尔实验室的成就实际上与此形成了对比。这些科学家和工程师并没有太大的压力，同时，由于贝尔实验室在研究实验室中的等级地位，他们能够真正雇佣到最优秀和最聪明的人，给予他们足够的时间去研究他们感兴趣的问题，还提供了相当的资金。如果你能够很好地证明你的研究项目与电话公司的理想和目标相关，你就能获得真正的研究资金。

### 03:00-Saron Yitbarek

Jon 强调，尽管贝尔实验室是这家盈利公司的产物，但其精神更接近于学术界。通过让员工自由探索自己的想法，贝尔实验室实践了类似于开源社区中可能发现的开放领导原则。

### 03:19-Jon Gertner

这是一个在 Apple、Google 和 Microsoft 之前的时代。计算机的历史常常集中在西海岸的 Homebrew Computer Club 类型的起源以及从中发展出来的东西。我认为这同样重要。这发生在一个如今看似不太可能的地方，那就是新泽西郊区。但这些科学家、研究人员和计算机工程师们正取得着巨大的突破，这些突破将在全球范围内产生重大、震撼的影响。

### 03:54-Saron Yitbarek

其中一个震撼世界的项目，证明是一个巨大的挑战，就是一个叫做分时的概念。他们能否建立一个操作系统，让一百甚至一千个用户同时使用？这将改变游戏规则。从1964年开始，贝尔实验室的聪明才智们与通用电气和麻省理工学院合作，看看他们是否能够共同推动这一神圣目标。麻省理工学院实际上早在一年前就启动了这个项目，称为 Project MAC，但不久后，所有这些顶尖团队开始共同努力，构建一个主机分时操作系统。

### 04:40-Saron Yitbarek

John McCarthy 实际上在1959年就引入了这个概念。想了解这个故事，请查看我们关于人工智能的第七集。他想象一种大型机器，可以在多个用户之间切换注意力。McCarthy 认为，这样的机器将有潜力极大地扩展计算文化。想象一下。如果一千个用户可以在一台机器上工作，那么整个编程世界、整个计算机世界都将实现民主化。因此，这个重磅团队着手实现 McCarthy 的梦想，并给这个虚构的操作系统命名为 Multics。

### 05:23-Saron Yitbarek

他们在分时项目上工作了多年，但该项目耗资巨大，经过十年，结束的迹象仍不明显。更糟糕的是，他们的研究主管 Bill Baker 是一位化学家，并不太关心贝尔的计算机科学部门。我们还可以再增加一个问题：自尊心的问题。

### 05:46-Jon Gertner

关于贝尔实验室，有一点你会一次又一次地看到，他们经常单独进行项目。我是说，在贝尔实验室内部有一种感觉，他们拥有所有需要的人、所有需要的想法和最好的技术，如果有值得解决的问题，他们就可以去解决。Multics 对贝尔实验室不成功在某种程度上也可能是因为这种更大规模的协作努力在贝尔系统内部并没有真正发挥良好，或未能满足那里的高管。

### 06:20-Saron Yitbarek

Jon Gertner 是《创意工厂》的作者。他的最新书籍名为《世界尽头的冰》。

### 06:32-Saron Yitbarek

贝尔实验室在1969年4月正式退出了 Multics 项目，那么故事到此结束，对吧？就贝尔实验室而言，分时的 Multics 梦想已经破灭。或者说并非如此？结果是，贝尔实验室并不是所有人都放弃了分时的追求。在其他人都已转身离去之后，仍有四位顽固的坚持者坚守着这个梦想，而他们的故事接下来就要讲述。

### 07:08-Saron Yitbarek

有些梦想，坦率地说，是无法轻易消逝的。

### 07:12-Joy Lisi Rankin

这是一件大事。

### 07:14-Saron Yitbarek

这是 Joy Lisi Rankin。她是《美国计算机人民史》的作者。Joy 和我聊到了分时的梦想，以及为什么这个梦想太重要而无法放弃。

### 07:27-Joy Lisi Rankin

这是件大事，而且非常雄心勃勃。直到那时，或者说在项目启动之前，大多数60年代早期的分时系统可能在单个主机上只支持40或50个终端。所以，提升一个数量级是非常可观的，甚至可能比任何人意识到的还要雄心勃勃，因此项目在某种程度上挣扎着实现其最初目标，但尽管如此，分时系统仍然以不同形式继续存在，并确实蓬勃发展；不仅在麻省理工学院，也在其他地方。

### 08:09-Saron Yitbarek

是的。那么，当我们谈到60年代时，谁在推动分时的需求？你提到了麻省理工学院、通用电气和贝尔实验室。我们是在谈论企业吗？还是在谈论学术界？谁在真正推动这一进程？

### 08:23-Joy Lisi Rankin

我认为是学术界和商业界，以及科学界在推动，因为这确实如我所提到的，是一种更一对一、互动的计算体验。但另一方面，我也会说教育工作者在推动这一进程。在国家层面上，也有关于创建全国性计算公用事业的讨论。因此，基本上是一个国家级的分时网络，而美国的思想领袖们也有这样一种分时的语言，认为这将类似于电力、电话或水服务。

### 09:08-Saron Yitbarek

哇。

### 09:08-Joy Lisi Rankin

是的，我知道！这是一件——

### 09:09-Saron Yitbarek

这是件大事。

### 09:11-Joy Lisi Rankin

这是非常重大的事情。

### 09:13-Saron Yitbarek

Joy 帮我想起，尽管这一集的重点是构建 C 语言和 UNIX 的团队，但在贝尔实验室，推动分时的更广泛努力实际上是一个运动，比任何一个团队都要大。实际上，这是一个将计算视为公共事业的推动，它有许多我们在这里无法一一提及的英雄：像 Bob Albrecht 和 Martin Greenberger 这样的许多人。

### 09:37-Saron Yitbarek

好吧，带着这个前提，接下来是我与 Joy 的谈话的其余部分。

### 09:41-Joy Lisi Rankin

所以，当 John McCarthy 首次在麻省理工学院公开谈论分时时，他在演讲中明确将其与电力进行比较，并说：“这是一种每个人都可以拥有计算的方式，不仅仅是在大学、学校或企业中，也可以在他们的家中。”回过头来阅读那个时代的文章和文件，毫无疑问，许多人心中都相信会有一个计算公用事业，并且它会被监管。因此，对于这种国家级的分时公用事业，人们充满信心和支持。

### 10:22-Saron Yitbarek

那么，有趣的是，到1970年，IBM 实际上退出了分时行业。即使是通用电气，他们也出售了他们的主机计算机部门，但实际上他们保留了他们的分时业务。让我们聊聊这件事。1970年发生了什么？

### 10:39-Joy Lisi Rankin

我认为1970年已经成为一个标志——也许是一个人为的标志——计算公用事业或分时行业承诺的衰落。在某些方面，这种看法是错误的。我认为到了60年代末，麻省理工学院和 Multics 显然在努力创建这种千个或上千个终端的分时系统，而且这是一个非常公开、显著的项目。同时，在60年代末，数十家提供这种公用事业模式的分时企业在美国各地涌现并蓬勃发展。这是一场科技泡沫。然后，热情逐渐消退；并不是完全消失，因为尽管通用电气出售了他们的分时主机计算机业务，但他们在70年代和80年代保留了他们的分时公用事业业务，并且这一业务是盈利的。而麻省理工学院等大学也在80年代继续运行分时系统。

### 11:52-Joy Lisi Rankin

我认为，公众对分时的记忆是，它是一个在70年代死去的科技泡沫，部分原因是大家对 Multics struggling 的关注。然而，如果我们回过头来看看人们是如何使用它的，它是多么盈利和成功，它在70年代实际上是蓬勃发展的。

### 12:17-Saron Yitbarek

现在，回到贝尔实验室，一组四位技术人员想要一个自己的分时系统：Ken Thompson、Dennis Ritchie、Doug McIlroy 和 J.F. Ossanna。但他们不想要 Multics；他们想要跨越式进步，创建一个更简洁、更强大的系统，他们称之为 UNIX。

### 12:39-Joy Lisi Rankin

我会说，Multics 是 UNIX 的灵感，因为一些在 Multics 上工作的程序员非常享受分时系统带来的好处，他们希望为自己创造一个这样的环境，因为显然 Multics 正在挣扎。这些是贝尔实验室的程序员，他们决定尝试创建自己的编程框架和分时系统，这就是后来成为 UNIX 的东西。

### 13:20-Saron Yitbarek

Joy Lisi Rankin 是《美国计算机人民史》的作者。

### 13:29-Saron Yitbarek

Dennis Ritchie 后来会将他和其他三位贝尔实验室同事称为一个合作小组。这个小组希望作为一个紧密的开发者四人组合作，他们需要硬件来支持他们的编程。但贝尔实验室实际上已经从分时的梦想中转身，尽管贝尔实验室可以被视为一个研究乌托邦，但在这种情况下，他们达到了极限，因此拒绝了新的硬件提案。费用实在太高，为什么要冒这个险？但这个小组依然坚持不懈。

### 14:05-Saron Yitbarek

Thompson 和 Ritchie 要求使用他们曾在 Multics 上工作的 GE645 机器。当他们无法获得资金时，他们只是在纸上写下关于文件系统的想法。最终，他们设法将一些想法实现到一个叫做“太空旅行”的游戏中，这个游戏在 PDP-7 上运行。他们继续使用那台 PDP-7，基本上与 Commodore 64 同级。一步一步来，至少在最开始没有贝尔的支持。这个小组为他们的分时梦想赋予了新的生命，形成了他们称之为 UNIX 的东西。

### 14:47-Saron Yitbarek

但问题是：UNIX 操作系统是用汇编语言创建的。我的意思是，这些家伙是通过纸带将文件传输到他们的 PDP-7 上，所以你可以想象，他们试图用不理想的工具构建这个突破性的东西，而且再次没有来自上级的支持。UNIX 正在成形，但仍然缺少一种真正能让它“唱”的语言。

### 15:23-Saron Yitbarek

UNIX 的第一次新语言尝试是 Ken Thompson 写的一个叫 B 的语言。

### 15:30-Andy Tanenbaum

这是 BCPL（基础组合编程语言）的衍生物。

### 15:33-Saron Yitbarek

这是 Andy Tanenbaum。他是阿姆斯特丹的计算机科学教授，也是许多书籍的作者，包括经典著作《计算机网络》。听听他对 Thompson 的 B 语言的背景故事。

### 15:48-Saron Yitbarek

所以，B 是 BCPL 的衍生物？

### 15:51-Andy Tanenbaum

这是一个试图制作能实际工作的 CPL 编译器的尝试，而这个编译器是基于 ALGOL 60 的，而 ALGOL 60 又是源自 ALGOL 58，后者是为了更好地实现 Fortran 的尝试。

### 16:01-Saron Yitbarek

明白了吗？重点是，B 带来了很多包袱。它与所有那些前身没有太大区别，因此在让 UNIX 发光的挑战面前，B 实在不够格。首先，B 不知道数据类型。此外，它的汇编语言对应的程序在使用 B 编译器的线程代码技术时仍然能更快地生成程序。

### 16:31-Andy Tanenbaum

BCPL 和 B 只有一个数据类型：字（word）。但在 IBM 704、709、7090 和 7094 等字面向的机器上，字是很不错的选择。然而，从 360 开始以及所有的小型计算机都是字节（byte）为导向的机器，只有一个数据类型。字的设计并不理想，对于现代计算机来说是个糟糕的选择。因此，显然 B 是无法应对的。

### 16:57-Saron Yitbarek

所以，团队之前工作过的所有机器都是字面向的，但正如 Andy 所说，仅仅针对单一尺寸对象的设计是行不通的。幸运的是，此时，贝尔实验室的高层意识到这里发生了一些令人兴奋的事情，他们重新支持这个项目，并资助了 65,000 美元的 PDP-11，而这台机器并不是字面向的，而是字节导向的。现在，Dennis Ritchie 可以利用 PDP-11 直接解决他们的语言问题。

### 17:36-Andy Tanenbaum

Dennis 基本上在 Ken 的一些输入下，决定写一种新语言，这种语言结构更清晰，具有其他类型，比如字符、整型、长整型等等。

### 17:47-Saron Yitbarek

因此，从 1971 年到 1973 年，Dennis Ritchie 不断修改 B 语言。他添加了一种字符类型，并构建了一个新的编译器，这样就不再需要使用线程代码。经过两年的发展，B 语言转变为一种全新的语言，名为 C。

### 18:08-Saron Yitbarek

C 是一种强大的混合语言。它具有高级功能，同时也具备详细的特性，允许用户编程操作系统。它找到了一个最佳的平衡点。C 从机器级抽象了足够多的细节，使其也能够移植到其他机器上。事实证明，C 远不止是一种用于应用程序开发的语言。它几乎是一个通用的编程工具，无论是在个人计算机上还是在超级计算机上都同样强大，而这一点极其重要，因为个人计算机革命即将到来。

### 18:49-Saron Yitbarek

一旦明确 C 是正确的方向，UNIX 内核就被用 C 重写了，其许多组件也是如此。因此，如果你想使用 UNIX，你就不得不使用 C。C 的成功与 UNIX 的成功是紧密相连的。

### 19:06-Andy Tanenbaum

C 受欢迎的原因不仅仅在于它比 B 语言更优秀（确实是这样），而在于它是 UNIX 的编程语言。当 UNIX 被广泛分发时，它带有一个 C 编译器，最终还配备了两个 C 编译器。因此，使用 UNIX 的人，随着时间的推移，数量越来越多，他们都有一个 C 编译器，而 UNIX 中的所有工具都是用 C 编写的。而且 C 语言相当不错，既然它随 UNIX 一起提供，何必再寻找其他语言呢？

### 19:33-Saron Yitbarek

从那时起，C 的价值只增不减。

### 19:35-Andy Tanenbaum

C 和 UNIX 在最初是相互依赖的，因为 UNIX 是用 C 编写的，并且它有一个 C 编译器，因此，它们几乎是一起发展的。在某个时刻，C 在 UNIX 系统上变得足够流行，以至于 Steve Johnson 等人编写了可移植 C 编译器，能够为其他机器生成代码。最终，除了 UNIX 以外的操作系统上也编写了 C 编译器，人们开始用 C 编写各种各样的软件，从数据库系统到无数其他应用，因为它可用、有效且运行良好。

### 20:07-Saron Yitbarek

因此，很快就会有与 UNIX 无关的程序使用 C 编写，因为这种语言的优点显而易见。Andy 描述了 C 语言的全面普及。

### 20:20-Andy Tanenbaum

C 处于一个恰当的时机。在 1970 年代，计算机的规模远小于现在。普通人没有计算机，对计算机一无所知，但大学和大公司有计算机，其中许多使用 UNIX，而 C 就是与之配套的，因此他们使用 C。这建立了一个庞大的软件基础和程序员基础。如果一家公司想要一个 C 程序员，发布广告后会有人申请。如果他们想要一个 B 程序员，根本没有人应聘。

### 20:49-Saron Yitbarek

在 C 的世界里，存在着基础设施——软件、库、头文件以及所有这些工具，这形成了一个良性循环。

### 20:59-Andy Tanenbaum

因此，它变得越来越受欢迎。

### 21:02-Saron Yitbarek

如今，互联网的出现引发了对 C 的安全担忧，这些担忧在 C# 等变体中得到了部分解决。有时会觉得，所有的兴奋点都在于像 Python 或 Go 这样的新语言。但是我们在这个播客上尝试做的一件事就是记住我们与历史的紧密联系，而 C 的影响力依然不可小觑。

### 21:29-Saron Yitbarek

C 显著影响现代技术的一个地方就是 UNIX 的“教子” Linux®，它确实是用 C 编写的。甚至 Linux 项目的标准编译器 GCC（GNU 编译器集合）也是用 C 编写的。虽然这可能不明显，但今天那些在 Linux 上忙碌的开源程序员，实际上与半个世纪前为他们构建的语言有着千丝万缕的联系，而 C 的统治地位随着每一年过去而不断增长。

### 22:02-Andy Tanenbaum

事实证明，现在世界上两个主导的操作系统是 Android，它运行在 Linux 上，而 Linux 是 UNIX 的重写版本，以及 iOS，它是基于 Berkeley UNIX 4.4 的。因此，Android 和 iOS 实际上都是 UNIX。我怀疑世界上几乎所有的服务器都运行着某个版本的 UNIX 或 Linux。它在幕后有着巨大的影响力，任何运行 UNIX 的系统都会朝着 C 的方向发展，与之相关的所有内容也都会用 C 编写。C 真的无处不在。

### 22:41-Saron Yitbarek

Andy Tanenbaum 是计算机科学教授，也是《计算机网络》一书的作者。有趣的是，他还是 MINIX 的创造者，MINIX 是一个免费的开源 UNIX 版本，实际上启发了 Linus Torvalds 创建 Linux。没错，Andy 也是用 C 编写了 MINIX。

### 23:03-Saron Yitbarek

如今，C 存在于我们生活的方方面面，从火星上的探测器到我们桌面的浏览器。它影响了我们在本季探讨的许多语言，如 Go、JavaScript 和 Perl。由于与 UNIX 的深厚关系，C 可能是地球上最普遍存在的语言。

### 23:28-Speaker 7

1998 年国家科学奖章的获得者：来自贝尔实验室、朗讯科技的 Kenneth L. Thompson 和 Dennis M. Ritchie 团队。

### 23:40-Saron Yitbarek

回到 60 年代，那四位贝尔实验室的员工——Ken Thompson、Dennis Ritchie、Doug McIlroy 和 J.F. Ossanna——不得不乞求一点认可和资金。但在 1998 年，Thompson 和 Ritchie 因其在 C 和 UNIX 上的工作获得了国家科学奖章。他们还分享了一百万美元的图灵奖。这可不算差。

### 24:10-Saron Yitbarek

在整个赛季中，我们一直在追踪一些我们最喜欢的编程语言的运动和魔力。无论它们是通过依附于像 C 一样的操作系统而起步，还是像 Go 那样利用新基础设施，一件事情始终不变：语言有其生命。它们诞生、成长、成熟。有时，它们变老并消亡。我们越了解它们，就越清楚我们的编程语言实际上是这些活力四射的力量，总是在随着时代变化而变化。我们的工作是注意这些变化并作出相应的反应。我们的语言往往是构建我们想要的世界的最佳工具。

### 25:00-Saron Yitbarek

这就是《命令行英雄》第三季的全部内容。我希望你们听得开心，就像我们制作这季内容时的心情一样。第四季已经在筹备中，我们很快就会把它带给你们。

### 25:13-Saron Yitbarek

《命令行英雄》是红帽公司的原创播客。

### 25:18-Saron Yitbarek

如果你想深入了解 C 语言或本季覆盖的任何编程语言，请访问 redhat.com/commandlineheroes。我是 Saron Yitbarek。下次再见，继续编程！
